---
description: "RougeShool 프로젝트 코드 품질 향상 표준"
globs: ["Assets/Script/**/*.cs"]
rule_id: code_quality_standards
version: 1.0.0
alwaysApply: false
---

# 코드 품질 향상 표준 (Production)

> 목적: 엔터프라이즈급 코드 품질 달성, 유지보수성 향상, 팀 개발 효율성 증대

## 1) 적용 범위와 원칙
- 범위: `Assets/Script/**` 전역. 모든 C# 스크립트 작성/수정 시 적용
- 원칙: 품질 우선 → 성능 고려 → 확장성 확보 → 테스트 가능
- 기준: Unity 2D 게임 개발에 최적화된 엔터프라이즈급 표준

## 2) 아키텍처 품질 기준
- **SOLID 원칙**: 단일 책임, 개방-폐쇄, 리스코프 치환, 인터페이스 분리, 의존성 역전
- **디자인 패턴**: DI, 팩토리, 전략, 옵저버, 상태, 커맨드 패턴 적극 활용
- **의존성 관리**: Zenject DI 컨테이너 활용, 인터페이스 기반 설계
- **모듈화**: 높은 응집도, 낮은 결합도, 명확한 경계
- **기존 코드 우선**: 새로 생성하기보다는 기존 코드 수정/확장 우선
- **중복 제거**: 동일/유사 기능 통합, 단일 출처 원칙(Single Source of Truth)
- **상속 구조**: 올바른 상속 관계, virtual/override 키워드 적절한 사용
- **인터페이스 구현**: 명시적 구현, 타입 안전성, 다형성 활용

## 3) 코드 구조 품질
- **클래스 설계**: 단일 책임, 명확한 목적, 적절한 크기 (200줄 이하)
- **메서드 설계**: 단일 기능, 명확한 네이밍, 적절한 크기 (20줄 이하)
- **변수 설계**: 의미 있는 이름, 적절한 스코프, 불변성 활용
- **상수 설계**: 매직 넘버 제거, 의미 있는 상수명, 적절한 그룹화
- **상속 설계**: 부모 클래스의 virtual 메서드는 override로 구현, new 키워드 사용 금지
- **인터페이스 설계**: 명시적 구현, 타입 캐스팅 안전성, 예외 처리 포함

## 4) 성능 품질 기준
- **메모리 관리**: 객체 풀링, 캐싱, 불필요한 할당 최소화
- **실행 효율**: Update 최소화, 비동기 처리, 지연 로딩
- **GC 압박**: 값 타입 활용, 문자열 최적화, 컬렉션 효율성
- **프로파일링**: Unity Profiler 활용, 성능 병목 지점 식별

## 5) 에러 처리 품질
- **예외 처리**: 적절한 예외 타입, 의미 있는 메시지, 복구 로직
- **로깅**: GameLogger 활용, 적절한 레벨, 한국어 메시지
- **검증**: 매개변수 검증, 상태 검증, 경계값 검사
- **복구**: 자동 복구, 사용자 피드백, 안전한 종료
- **타입 안전성**: null 체크, 타입 캐스팅 검증, ArgumentException 활용
- **상속 에러**: CS0114 경고 해결, override 키워드 적절한 사용

## 6) 테스트 품질 기준
- **단위 테스트**: 모든 public 메서드 테스트, 모킹 활용
- **통합 테스트**: 시스템 간 상호작용 테스트
- **성능 테스트**: 메모리 사용량, 실행 시간 측정
- **자동화**: CI/CD 파이프라인 통합, 자동 실행

## 7) 문서화 품질
- **XML 문서**: 모든 public API 문서화, 예시 포함
- **한국어 주석**: 복잡한 로직 설명, 의도 명시
- **README**: 사용법, 설정법, 문제 해결법 포함
- **변경 기록**: Delta 섹션, 버전 관리, 영향도 분석

## 8) 코드 스타일 품질
- **네이밍**: 일관된 규칙, 의미 있는 이름, 약어 금지
- **포맷팅**: 일관된 들여쓰기, 적절한 공백, 그룹화
- **구조**: #region 활용, 논리적 그룹화, 명확한 흐름
- **주석**: 필요한 곳에만, 간결하고 명확하게

## 9) 보안 품질 기준
- **입력 검증**: 모든 외부 입력 검증, SQL 인젝션 방지
- **권한 관리**: 적절한 접근 제어, 민감 정보 보호
- **데이터 보호**: 암호화, 안전한 저장, 전송 보안
- **로깅 보안**: 민감 정보 로깅 금지, 로그 레벨 관리

## 10) 확장성 품질
- **인터페이스**: 확장 가능한 인터페이스 설계
- **플러그인**: 모듈식 아키텍처, 플러그인 시스템
- **설정**: 외부 설정 파일, 런타임 변경 가능
- **버전 관리**: 하위 호환성, 마이그레이션 지원

## 11) 품질 검증 도구
- **정적 분석**: Roslyn Analyzer, SonarQube 활용
- **코드 리뷰**: 동료 리뷰, 체크리스트 활용
- **자동화**: Git hooks, CI/CD 파이프라인
- **메트릭**: 복잡도, 커버리지, 중복도 측정

## 12) 품질 게이트(머지 전 필수)
- 코드 리뷰 승인 ≥ 1인
- 모든 테스트 통과 (단위/통합/성능)
- 정적 분석 도구 경고 0
- 성능 기준 충족 (메모리/실행시간)
- 문서화 완료 (API/README/Delta)

## 13) 품질 개선 프로세스
1) **측정**: 현재 품질 수준 측정, 메트릭 수집
2) **분석**: 문제점 식별, 개선 우선순위 설정
3) **계획**: 개선 계획 수립, 리소스 할당
4) **실행**: 단계적 개선, 지속적 모니터링
5) **검증**: 개선 효과 측정, 피드백 수집

## 14) 품질 체크리스트(요약)
- [ ] SOLID 원칙 준수
- [ ] 적절한 디자인 패턴 활용
- [ ] 성능 최적화 적용
- [ ] 에러 처리 완비
- [ ] 테스트 코드 작성
- [ ] 문서화 완료
- [ ] 코드 스타일 일관성
- [ ] 보안 기준 충족
- [ ] 확장성 고려
- [ ] 품질 게이트 통과
- [ ] 상속 구조 정리 (virtual/override 적절한 사용)
- [ ] 인터페이스 구현 완료 (타입 안전성 확보)
- [ ] 컴파일 경고 해결 (CS0114 등)

## 15) 변경 기록(Delta)
- 형식: `YYYY-MM-DD | 작성자 | 품질 개선 요약 | 영향도(코드/성능/문서)`

예)
- 2025-01-27 | Maintainer | 코드 품질 향상 표준 신규 제정 | 문서
- 2025-01-27 | Maintainer | 엔터프라이즈급 품질 기준 추가 | 문서
- 2025-01-27 | Maintainer | 상속 구조 및 인터페이스 구현 품질 기준 추가 | 문서
- 2025-01-27 | Maintainer | 타입 안전성 및 컴파일 경고 해결 기준 추가 | 문서