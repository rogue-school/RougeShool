---
description: "RougeShool 프로젝트 문서 작성/유지/검증 통합 규칙"
globs: ["Assets/Scenes/Docs/**/*.md", "Assets/Scenes/**/*.unity", "Assets/Script/**/*.cs"]
rule_id: documentation_work_rules
version: 1.2.0
alwaysApply: true
---

# RougeShool 문서 작업 통합 규칙 (Production)

> 목적: 실사용 가능한 문서만, 항상 최신 상태로, 팀 전체가 빠르게 찾고 검증할 수 있게 만드는 규칙. Cursor AI와 연동되어 자동화/검증이 가능해야 한다.

## 1) 적용 범위와 원칙
- 모든 문서는 한국어로 작성하며 마크다운을 사용한다.
- 문서는 실제 프로젝트 상태(코드/씬/프리팹)와 1:1 동기화한다.
- 임시/예시 문서는 금지. 사용자가 명시한 경우에만 예시를 허용한다.
- 중복 금지: 기존 문서를 재사용·참조하고, 단일 출처 원칙(Single Source of Truth)을 유지한다.
- 문서는 리뷰와 PR 체크리스트를 통과해야 머지된다.

## 2) 문서 유형과 저장 위치
- 시스템 문서: `Assets/Script/<SystemName>/**` → `Assets/Script/<SystemName>/**/Docs/<SystemName>_개발문서.md`
- 씬 문서: `Assets/Scenes/Docs/<SceneName>_씬제작문서.md`
- 공통 규칙: `.cursor/rules/*.mdc`
- 상호 참조: 상대 경로만 허용한다.

## 3) 표준 구조(모든 시스템 문서 공통)
1. 📋 시스템 개요(2~3줄)
2. 🏗️ 폴더 구조(코드 기준, 파일 수 포함)
3. 📁 주요 컴포넌트(핵심 클래스/프리팹 요약)
4. 🎯 주요 기능(번호 목록)
5. 🔧 사용 방법(실행 가능한 코드/에디터 절차)
6. 🏗️ 아키텍처 패턴(패턴/DI/이벤트)
7. 🔧 기술적 구현 세부사항(성능/스레드/메모리)
8. 🏗️ 시스템 아키텍처(mermaid 다이어그램 허용)
9. 📚 참고 자료(내부 문서만 우선)
10. 🧪 검증/테스트 지침(체크리스트/재현 절차/로그)
11. 📝 변경 기록(Delta)

### 3-α) 작성 규칙
- 헤딩 레벨: H1=문서 제목, H2=섹션, H3=하위, H4=세부.
- 코드 블록은 언어 태그 지정(C#, bash, json 등). 사용 방법 섹션에만 예시 허용.
- 표는 프로젝트 표준 템플릿을 사용한다.
- 링크는 상대 경로만 사용한다.

## 4) 표 템플릿(표준)

### 4-1) 핵심 설정값 표
| 항목 | 값 | 비고 |
|---|---|---|
| 설정 키 | 실제 값 | 권장 값/편차 |

### 4-2) 인스펙터 연결 표
| 오브젝트 | 컴포넌트 | 필드 | 값/참조 | [필수] |
|---|---|---|---|---|
| 대상명 | 타입 | 필드명 | 실제 참조/값 | 필수/선택 |

### 4-3) DI 매핑 표(권장)
| 인터페이스 | 구현체 | 범위(Scope) | 비고 |
|---|---|---|---|

## 5) 작성·검증 워크플로우(CI/PR 연동)
1) 변경 감지: 코드/씬/프리팹 변경 시 관련 문서 파일을 반드시 수정한다.
2) 동기화 규칙:
- 씬 변경 시: `scene_hierarchy_documentation_rules.mdc`의 트리/표/체크리스트를 따라 문서 동기화.
- 시스템 변경 시: 공개 API, 초기화 순서, DI, 상태도 변경을 문서에 반영.
3) PR 체크리스트(필수):
- [ ] 문서와 코드/씬의 주요 값·참조 일치
- [ ] 인스펙터 연결 표의 [필수] 항목 누락 없음
- [ ] 핵심 설정값 표에 현재 값 vs 권장 값 편차 기재
- [ ] Delta 섹션 최신화(날짜/작성자/요약/영향도)
- [ ] 경로/링크 상대 경로만 사용
4) 리뷰 기준:
- BLOCKER: 문서-코드 불일치, 필수 표/섹션 누락, 예시만 존재.
- HIGH: 권장 값 미기재/검증 절차 불명확.
- MEDIUM: 형식/헤딩/링크 경미한 불일치.
- LOW: 표현/띄어쓰기/아이콘 등 경미한 가독성 이슈.

### 5-α) 리뷰 심각도 기준(수치화)
- BLOCKER:
  - 인스펙터 연결 표의 [필수] 항목 누락 1개 이상
  - CanvasScaler.ReferenceResolution ≠ 1920×1080
  - 문서-코드/씬 값 불일치(필드/Enum/리소스 경로)
  - Delta 섹션 누락 또는 최신 변경 미반영
- HIGH:
  - 상대 경로 위반(절대 URL/절대 경로 사용)
  - 코드 블록 언어 태그 누락 2건 이상
- MEDIUM/LOW: 형식/띄어쓰기/아이콘 일관성 이슈(동작 영향 없음)

## 6) Cursor AI 도구/API 사양 및 사용 규칙

### 6-1) 제공 도구(정식 명칭)
- read_file: 단일 파일 읽기. 큰 파일은 offset/limit로 분할.
- list_dir: 디렉터리 목록 조회. 숨김 제외.
- glob_file_search: 글롭 패턴으로 파일 찾기.
- codebase_search: 의미 기반 코드 검색(광역 탐색의 기본 도구).
- grep: 정확한 문자열/정규식 검색(심볼/정확 매칭 시 우선).
- edit_file: 부분 편집(명확한 전후 맥락으로 최소 변경 적용).
- apply_patch: 다중 변경(diff) 적용. 최근 읽기 후 사용 권장.
- delete_file: 파일 삭제. 보안/권한 실패 시 안전 종료.
- read_lints: 변경 파일 린트 결과 조회. 수정 후 반드시 확인.
- todo_write: 구현 작업을 구조화·진행 상태 갱신.
- run_terminal_cmd: 터미널 명령 실행(비대화식 플래그 필수, pager 금지).
- web_search: 최신 정보 조회(프로젝트 외부 지식 필요 시만).
- update_memory: 사용자가 저장 요청 시에만 기억 저장/갱신.
- edit_notebook: 노트북 셀 편집 전용(일반 문서에는 미사용).
- multi_tool_use.parallel: 독립 도구 호출을 병렬 실행(정보 수집 가속).

### 6-2) 사용 원칙
- 탐색 기본값: codebase_search → 후보 축소 후 read_file/grep.
- 정확 매칭 필요: grep 우선. 광역 탐색: codebase_search 우선.
- 편집 시: edit_file(소규모) → apply_patch(다중/광범위). 최근 read_file로 컨텍스트 재확인.
- 대용량 파일: 부분 읽기 규칙 준수(프로젝트 대용량 규칙과 동일).
- 병렬화: 독립 검색/읽기는 반드시 parallel로 동시에 실행.
- 터미널: 상호작용 금지 옵션 사용, pager 금지(`| cat`). 장기 실행은 백그라운드.
- 린트: 모든 변경 후 read_lints 실행, 오류 0 보장.
- Todo: 의미 있는 작업 단위만 등록, 진행도 즉시 갱신.
- 문서 변경: 항상 Delta 업데이트, 씬/코드 값과 표 동기화.
- 금지: 예시 전용 문서/더미 데이터/설명용 코드 생성.

### 6-3) 도구 선택 의사결정 트리
- 질문/탐색이 광범위: codebase_search → 후보 파일 범위 축소
- 정확 심볼/문자열 필요: grep → read_file로 주변 컨텍스트 확인
- 편집이 1곳/소규모: edit_file
- 편집이 다수/여러 파일: apply_patch (직전 read_file로 컨텍스트 확인)
- 독립 검색/읽기 작업 2건 이상: multi_tool_use.parallel로 병렬 실행
- 변경 후 항상: read_lints로 오류 0 확인
- 터미널 필요: run_terminal_cmd(비대화식, pager 금지, 장기 실행은 백그라운드)

### 6-4) 금지/제약 요약
- 예시 전용/더미 데이터 기반 문서 금지
- 외부 링크는 최소화, 내부는 상대 경로만 허용
- 상호작용 요구 명령 금지(프롬프트 대기 X), 승인 플래그 필수

## 7) 유지보수 규칙
- 문서 생성보다 리팩토링·단순화 우선. 중복 문서 즉시 통합.
- 문서 파일명/위치 변경 시 PR 설명에 변경 사유/영향도를 요약.
- 문서 간 공통 섹션은 규칙 파일(`.mdc`)을 참조하도록 링크한다.

## 8) 품질 게이트(머지 전 필수)
- 리뷰 승인 ≥ 1인(문서 담당 포함)
- CI 문서 린트 통과(모두 만족해야 함)
  - H1=1개, H2/H3 계층 정상(스킵 없음)
  - 코드 블록 언어 태그 100% 지정
  - 표 헤더/열 개수 일치, 파이프 정렬 오류 없음
  - 링크 전부 상대 경로, 베어 URL 금지
  - 섹션 수 ≥ 6이면 TOC 존재
  - Delta 섹션 존재, 최신 변경 날짜 ≥ 해당 PR 코드 변경일
- 씬/시스템 체크리스트 통과(필수 항목 100%)

## 9) 버전·호환성
- Unity 6000.0.42f1 기준. 하위/상위 버전 차이는 Delta에 명시.
- Render Pipeline: Built-in 기준. URP/HDRP 관련 내용은 별도 부록으로 분리.

## 10) 변경 기록(Delta)
- 형식: `YYYY-MM-DD | 작성자 | 변경 요약 | 영향도(코드/씬/문서)`

예)
- 2025-09-09 | Maintainer | 초기 규칙 수립 및 PR 체크리스트 정립 | 문서
- 2025-09-09 | Maintainer | Cursor AI 도구/API 사양 및 사용 규칙 추가 | 문서
- 2025-09-09 | Maintainer | Cursor Rules 프론트매터(Always 적용) 추가 | 문서
- 2025-09-09 | Maintainer | 씬 문서 명칭/경로 정정 및 CI/PR 게이트 수치화 | 문서

# 아래 내용은 구 규칙(중복)으로 삭제되었습니다. 단일 규칙 유지.

---
description: "RougeShool 프로젝트 문서 작성/유지/검증 통합 규칙"
auto_attach:
  - Assets/Scenes/Docs/**/*.md
  - Assets/Scenes/**/*.unity
  - Assets/Script/**/*.cs
  - .cursor/rules/scene_hierarchy_documentation_rules.mdc
rule_id: documentation_work_rules
version: 1.1.0
alwaysApply: true
---

# RougeShool 문서 작업 룰

## 📋 기본 문서 작업 원칙
- 모든 문서는 한국어로 작성해야 함
- 마크다운 형식을 사용하여 가독성을 높여야 함
- 문서는 실제 프로젝트 상태를 정확히 반영해야 함
- 문서 간 일관성을 유지해야 함
- 기존 문서와의 중복을 피하고 재사용을 우선해야 함

## 🔥 핵심 필수 규칙
- 사용자가 명시적으로 "예시 문서 생성"을 요청하지 않는 한 예시 문서를 생성하지 않음
- 모든 문서에서 정보의 정확성과 최신성을 보장해야 함
- 실제 프로젝트에 사용할 수 있는 완전한 문서만 생성해야 함

## ⚙️ 자동화/프로세스 연계
- 코드/씬/프리팹 변경의 마지막 단계에 반드시 관련 문서 갱신을 수행
- 씬 변경 시 `scene_hierarchy_documentation_rules.mdc`를 기준으로 트리/표/체크리스트 동기화
- 문서 변경은 항상 파일 하단 "변경 기록(Delta)" 섹션에 추가

## 📚 문서 구조 및 형식 규칙
- 마크다운 형식을 사용하여 가독성을 높여야 함
- 적절한 헤딩 레벨을 사용하여 문서 구조를 명확히 해야 함
- 코드 블록은 적절한 언어 태그를 사용해야 함
- 테이블은 적절한 정렬과 포맷팅을 사용해야 함
- 링크는 상대 경로를 사용하여 프로젝트 내 이동을 지원해야 함

### 표 템플릿(표준)
| 항목 | 값 | 비고 |
|---|---|---|
| 설정 키 | 실제 값 | 권장 값/편차 |

| 오브젝트 | 컴포넌트 | 필드 | 값/참조 | [필수] |
|---|---|---|---|---|
| 대상명 | 타입 | 필드명 | 실제 참조/값 | 필수/선택 |

## 🎯 문서 작성 가이드
- 문서 생성 전 요구사항을 분석하고 목적을 정의해야 함
- 기존 문서와의 중복을 피하고 일관성을 유지해야 함
- 문서 구조를 명확히 하고 가독성을 높여야 함

## 📋 표준화된 문서 구조 룰

### 기본 문서 구조 (모든 시스템 문서에 적용)
1. **📋 시스템 개요** - 시스템의 목적과 핵심 기능 (2-3줄)
2. **🏗️ 폴더 구조** - 폴더 구조와 파일 개수
3. **📁 주요 컴포넌트** - 각 폴더별 주요 파일 설명
4. **🎯 주요 기능** - 시스템의 핵심 기능들 (번호 목록)
5. **🔧 사용 방법** - 기본 사용법과 코드 예시
6. **🏗️ 아키텍처 패턴** - 사용된 디자인 패턴들

### 전문적 개발자용 확장 구조 (핵심 시스템에 적용)
7. **🔧 기술적 구현 세부사항** - 성능, 메모리, 스레드 안전성
8. **🏗️ 시스템 아키텍처** - 의존성 다이어그램, 데이터 흐름
9. **📚 참고 자료(관련 문서만)** - 내부/공식 관련 문서 링크
10. **🧪 검증/테스트 지침** - 수동 체크리스트/재현 절차/로그 레벨
11. **📝 변경 기록(Delta)** - 날짜/작성자/요약/영향도(코드/씬/문서)

### 문서 우선순위 적용 기준
- **1순위 (필수)**: CoreSystem, CombatSystem, SkillCardSystem
- **2순위 (권장)**: CharacterSystem, SaveSystem, StageSystem
- **3순위 (선택)**: AnimationSystem, AudioSystem, UISystem, UtilitySystem

### 확장 구조 적용 조건
- **핵심 시스템**: 게임의 핵심 로직을 담당하는 시스템
- **복잡한 시스템**: 10개 이상의 클래스를 포함하는 시스템
- **성능 중요 시스템**: 프레임레이트에 직접 영향을 주는 시스템
- **확장 예정 시스템**: 향후 기능 확장이 예정된 시스템

### 헤딩 레벨 규칙
- **#** 시스템명 개발 문서 (H1)
- **##** 필수 섴션들 (H2)
- **###** 하위 섹션들 (H3)
- **####** 세부 항목들 (H4)

### 코드 블록 규칙
- 모든 코드 블록은 적절한 언어 태그 사용
- 사용 방법 섹션에만 코드 예시 포함
- 코드 예시는 실제 동작하는 완전한 코드만

### 목록 규칙
- 기능 설명은 번호 목록 사용 (1. 2. 3.)
- 파일 목록은 불릿 포인트 사용 (-)
- 중요 사항은 이모지와 함께 강조

## 🎮 씬 제작 문서 참조 규칙
- 씬 관련 모든 제작 규격/트리/표/체크리스트는 단일 출처인 `scene_hierarchy_documentation_rules.mdc`를 따른다.
- 본 문서에서 씬 제작 세부 템플릿은 유지하지 않으며, 항목 변화 시 해당 규칙 파일만 갱신한다.

## 🔧 기술적 구현 세부사항 룰

### 성능 최적화 문서화
- **메모리 관리**: 객체 풀링, GC 압박 최소화 전략
- **프레임 최적화**: Update() 최적화, 코루틴 vs async/await
- **렌더링 최적화**: Draw Call 최소화, Sprite Atlas 활용
- **로딩 최적화**: 비동기 로딩, 리소스 캐싱 전략

### 스레드 안전성 문서화
- **동시성 제어**: 락, 세마포어, 락 프리 구조
- **비동기 처리**: async/await 패턴, Task 기반 처리
- **이벤트 처리**: 스레드 간 이벤트 전달 메커니즘
- **데이터 동기화**: 공유 데이터 접근 제어

### 메모리 관리 문서화
- **생명주기 관리**: 객체 생성/소멸 패턴
- **리소스 해제**: using문, IDisposable 패턴
- **메모리 누수 방지**: 이벤트 구독 해제, 순환 참조 방지
- **프로파일링**: 메모리 사용량 모니터링 방법

## 🏗️ 시스템 아키텍처 문서화 룰

### 의존성 다이어그램
- **시스템 간 의존성**: 화살표로 의존 방향 표시
- **인터페이스 계약**: 구현체와 인터페이스 관계
- **데이터 흐름**: 데이터가 시스템을 통과하는 경로
- **이벤트 체인**: 이벤트 발생부터 처리까지의 흐름

### 클래스 다이어그램
- **상속 구조**: 클래스 계층 구조
- **구성 관계**: Has-A, Uses-A 관계
- **인터페이스 구현**: 인터페이스와 구현체 관계
- **의존성 주입**: DI 컨테이너 설정

### 시퀀스 다이어그램
- **메서드 호출**: 객체 간 메서드 호출 순서
- **이벤트 처리**: 이벤트 발생과 처리 과정
- **비동기 처리**: async/await 흐름
- **에러 처리**: 예외 발생과 처리 과정

### 다이어그램 작성 규칙
- **Mermaid 문법**: 표준 Mermaid 문법 사용
- **명확한 라벨**: 모든 요소에 명확한 라벨 표시
- **색상 구분**: 시스템별로 다른 색상 사용
- **화살표 방향**: 의존성 방향을 명확히 표시
- **계층 구조**: 상위-하위 관계를 명확히 표현

## 📚 참고 자료 룰

### 관련 문서 링크
- **설계 문서**: 시스템 설계 관련 문서
- **API 문서**: 외부 API 문서
- **표준 문서**: 관련 표준이나 규격
- **튜토리얼**: 학습용 자료

## 🚫 AI 사용 흔적 제거 규칙
- AI를 이용했다는 듯한 주석이나 메시지를 절대 넣지 않음
- "AI가 생성한 문서", "자동 생성", "AI 도움" 등의 표현 금지
- 문서 주석은 자연스럽고 전문적으로 작성
- 마치 인간 개발자가 작성한 것처럼 자연스러운 문서 사용
- AI 도구 사용 흔적을 완전히 제거
- 문서 품질은 AI가 생성했어도 인간이 작성한 것처럼 보이도록 함
- 문서 스타일은 프로젝트 전체와 일관성 있게 유지
- 불필요한 설명이나 과도한 주석 추가 금지
- 개발 과정의 세부사항이나 기술적 세부사항 노출 금지
- 중복 설명이나 반복적인 주석 금지
- 간결하고 목적 중심의 문서 작성