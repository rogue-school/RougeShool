---
description: "RougeShool 프로젝트 문서 작성/유지/검증 통합 규칙"
auto_attach:
  - Assets/Scenes/Docs/**/*.md
  - Assets/Scenes/**/*.unity
  - Assets/Script/**/*.cs
  - .cursor/rules/scene_hierarchy_documentation_rules.mdc
rule_id: documentation_work_rules
version: 1.1.0
alwaysApply: true
---

# RougeShool 문서 작업 룰

## 📋 기본 문서 작업 원칙
- 모든 문서는 한국어로 작성해야 함
- 마크다운 형식을 사용하여 가독성을 높여야 함
- 문서는 실제 프로젝트 상태를 정확히 반영해야 함
- 문서 간 일관성을 유지해야 함
- 기존 문서와의 중복을 피하고 재사용을 우선해야 함

## 🔥 핵심 필수 규칙
- 사용자가 명시적으로 "예시 문서 생성"을 요청하지 않는 한 예시 문서를 생성하지 않음
- 모든 문서에서 정보의 정확성과 최신성을 보장해야 함
- 실제 프로젝트에 사용할 수 있는 완전한 문서만 생성해야 함

## ⚙️ 자동화/프로세스 연계
- 코드/씬/프리팹 변경의 마지막 단계에 반드시 관련 문서 갱신을 수행
- 씬 변경 시 `scene_hierarchy_documentation_rules.mdc`를 기준으로 트리/표/체크리스트 동기화
- 문서 변경은 항상 파일 하단 "변경 기록(Delta)" 섹션에 추가

## 📚 문서 구조 및 형식 규칙
- 마크다운 형식을 사용하여 가독성을 높여야 함
- 적절한 헤딩 레벨을 사용하여 문서 구조를 명확히 해야 함
- 코드 블록은 적절한 언어 태그를 사용해야 함
- 테이블은 적절한 정렬과 포맷팅을 사용해야 함
- 링크는 상대 경로를 사용하여 프로젝트 내 이동을 지원해야 함

### 표 템플릿(표준)
| 항목 | 값 | 비고 |
|---|---|---|
| 설정 키 | 실제 값 | 권장 값/편차 |

| 오브젝트 | 컴포넌트 | 필드 | 값/참조 | [필수] |
|---|---|---|---|---|
| 대상명 | 타입 | 필드명 | 실제 참조/값 | 필수/선택 |

## 🎯 문서 작성 가이드
- 문서 생성 전 요구사항을 분석하고 목적을 정의해야 함
- 기존 문서와의 중복을 피하고 일관성을 유지해야 함
- 문서 구조를 명확히 하고 가독성을 높여야 함

## 📋 표준화된 문서 구조 룰

### 기본 문서 구조 (모든 시스템 문서에 적용)
1. **📋 시스템 개요** - 시스템의 목적과 핵심 기능 (2-3줄)
2. **🏗️ 폴더 구조** - 폴더 구조와 파일 개수
3. **📁 주요 컴포넌트** - 각 폴더별 주요 파일 설명
4. **🎯 주요 기능** - 시스템의 핵심 기능들 (번호 목록)
5. **🔧 사용 방법** - 기본 사용법과 코드 예시
6. **🏗️ 아키텍처 패턴** - 사용된 디자인 패턴들

### 전문적 개발자용 확장 구조 (핵심 시스템에 적용)
7. **🔧 기술적 구현 세부사항** - 성능, 메모리, 스레드 안전성
8. **🏗️ 시스템 아키텍처** - 의존성 다이어그램, 데이터 흐름
9. **📚 참고 자료(관련 문서만)** - 내부/공식 관련 문서 링크
10. **🧪 검증/테스트 지침** - 수동 체크리스트/재현 절차/로그 레벨
11. **📝 변경 기록(Delta)** - 날짜/작성자/요약/영향도(코드/씬/문서)

### 문서 우선순위 적용 기준
- **1순위 (필수)**: CoreSystem, CombatSystem, SkillCardSystem
- **2순위 (권장)**: CharacterSystem, SaveSystem, StageSystem
- **3순위 (선택)**: AnimationSystem, AudioSystem, UISystem, UtilitySystem

### 확장 구조 적용 조건
- **핵심 시스템**: 게임의 핵심 로직을 담당하는 시스템
- **복잡한 시스템**: 10개 이상의 클래스를 포함하는 시스템
- **성능 중요 시스템**: 프레임레이트에 직접 영향을 주는 시스템
- **확장 예정 시스템**: 향후 기능 확장이 예정된 시스템

### 헤딩 레벨 규칙
- **#** 시스템명 개발 문서 (H1)
- **##** 필수 섴션들 (H2)
- **###** 하위 섹션들 (H3)
- **####** 세부 항목들 (H4)

### 코드 블록 규칙
- 모든 코드 블록은 적절한 언어 태그 사용
- 사용 방법 섹션에만 코드 예시 포함
- 코드 예시는 실제 동작하는 완전한 코드만

### 목록 규칙
- 기능 설명은 번호 목록 사용 (1. 2. 3.)
- 파일 목록은 불릿 포인트 사용 (-)
- 중요 사항은 이모지와 함께 강조

## 🎮 씬 하이라키 구조 표준화 룰
문서 작성 시 `.cursor/rules/scene_hierarchy_documentation_rules.mdc`의 섹션/트리/표 형식을 그대로 사용한다. 상충 시 씬 전용 룰을 우선한다.

### 씬 구조 문서 필수 섹션
1. **📋 씬 개요** - 씬의 목적과 역할 (1-2줄)
2. **🏗️ 하이라키 구조** - GameObject 계층 구조 (트리 형태)
3. **📁 컨테이너별 구성** - 각 컨테이너의 역할과 포함 요소
4. **🔧 스크립트/컴포넌트 매핑** - GameObject별 연결된 스크립트
5. **📐 오브젝트 순서 규칙** - 하이라키에서의 오브젝트 배치 순서
6. **⚠️ 주의사항** - 수정 시 주의할 점들

### 하이라키 구조 표시 규칙
- **트리 구조**: ASCII 트리(│, ├─, └─) 사용
- **컨테이너 표시**: `이름 (컨테이너) 📦`(배지는 항상 우측 끝)
- **스크립트 표시**: `이름 (ScriptName)` 또는 `이름 (A, B)`
- **중요 오브젝트**: `⭐` 배지는 항상 우측 끝

### 씬별 표준 구조 템플릿

#### CoreScene 표준 구조
```
📦 CoreContainer (DontDestroyOnLoad)
├── 📦 CoreSystem
│   ├── CoreSystemInitializer ⭐
│   ├── GameLogger ⭐
│   └── CoroutineRunner ⭐
├── 📦 CoreUtilities
│   ├── AudioManager ⭐
│   └── SaveManager ⭐
├── 📦 CoreUI
│   └── LoadingScreenController
├── 📦 AudioSources
│   ├── BGMAudioSource
│   └── SFXAudioSource
└── 📦 Canvas
    └── CoreUICanvas
```

#### BattleScene 표준 구조
```
📦 BattleContainer
├── 📦 BattleSystem
│   ├── CombatManager ⭐
│   ├── TurnManager ⭐
│   └── CardManager ⭐
├── 📦 CharacterContainer
│   ├── PlayerCharacter ⭐
│   └── EnemyCharacter ⭐
├── 📦 UIContainer
│   ├── BattleUI ⭐
│   ├── CardHandUI
│   └── TurnButtonUI
└── 📦 EnvironmentContainer
    └── BattleBackground
```

### 오브젝트 순서 규칙
1. **컨테이너 우선**: 모든 오브젝트는 적절한 컨테이너 하위에 배치
2. **중요도 순서**: 핵심 시스템 → UI → 환경 순서
3. **알파벳 순서**: 동일 레벨의 오브젝트는 알파벳 순서
4. **스크립트 순서**: MonoBehaviour 스크립트가 있는 오브젝트 우선

### 수정 시 주의사항
- **컨테이너 구조 유지**: 새로운 오브젝트는 적절한 컨테이너에 배치
- **스크립트 연결**: 오브젝트 추가 시 필요한 스크립트 자동 연결
- **순서 준수**: 하이라키 순서 변경 시 문서 업데이트 필수
- **네이밍 규칙**: 일관된 네이밍 컨벤션 준수

### PR 체크리스트(문서 동기화)
- [ ] 변경된 코드/씬과 문서의 트리/표/값 동기화 완료
- [ ] 인스펙터 연결 표의 [필수] 항목 누락 없음
- [ ] 핵심 설정값 표에 현재 값 vs 권장 값 편차 명시
- [ ] Delta 섹션에 변경 이력 추가(날짜/작성자/요약/영향도)

## 🔧 기술적 구현 세부사항 룰

### 성능 최적화 문서화
- **메모리 관리**: 객체 풀링, GC 압박 최소화 전략
- **프레임 최적화**: Update() 최적화, 코루틴 vs async/await
- **렌더링 최적화**: Draw Call 최소화, Sprite Atlas 활용
- **로딩 최적화**: 비동기 로딩, 리소스 캐싱 전략

### 스레드 안전성 문서화
- **동시성 제어**: 락, 세마포어, 락 프리 구조
- **비동기 처리**: async/await 패턴, Task 기반 처리
- **이벤트 처리**: 스레드 간 이벤트 전달 메커니즘
- **데이터 동기화**: 공유 데이터 접근 제어

### 메모리 관리 문서화
- **생명주기 관리**: 객체 생성/소멸 패턴
- **리소스 해제**: using문, IDisposable 패턴
- **메모리 누수 방지**: 이벤트 구독 해제, 순환 참조 방지
- **프로파일링**: 메모리 사용량 모니터링 방법

## 🏗️ 시스템 아키텍처 문서화 룰

### 의존성 다이어그램
- **시스템 간 의존성**: 화살표로 의존 방향 표시
- **인터페이스 계약**: 구현체와 인터페이스 관계
- **데이터 흐름**: 데이터가 시스템을 통과하는 경로
- **이벤트 체인**: 이벤트 발생부터 처리까지의 흐름

### 클래스 다이어그램
- **상속 구조**: 클래스 계층 구조
- **구성 관계**: Has-A, Uses-A 관계
- **인터페이스 구현**: 인터페이스와 구현체 관계
- **의존성 주입**: DI 컨테이너 설정

### 시퀀스 다이어그램
- **메서드 호출**: 객체 간 메서드 호출 순서
- **이벤트 처리**: 이벤트 발생과 처리 과정
- **비동기 처리**: async/await 흐름
- **에러 처리**: 예외 발생과 처리 과정

### 다이어그램 작성 규칙
- **Mermaid 문법**: 표준 Mermaid 문법 사용
- **명확한 라벨**: 모든 요소에 명확한 라벨 표시
- **색상 구분**: 시스템별로 다른 색상 사용
- **화살표 방향**: 의존성 방향을 명확히 표시
- **계층 구조**: 상위-하위 관계를 명확히 표현

## 📚 참고 자료 룰

### 관련 문서 링크
- **설계 문서**: 시스템 설계 관련 문서
- **API 문서**: 외부 API 문서
- **표준 문서**: 관련 표준이나 규격
- **튜토리얼**: 학습용 자료

## 🚫 AI 사용 흔적 제거 규칙
- AI를 이용했다는 듯한 주석이나 메시지를 절대 넣지 않음
- "AI가 생성한 문서", "자동 생성", "AI 도움" 등의 표현 금지
- 문서 주석은 자연스럽고 전문적으로 작성
- 마치 인간 개발자가 작성한 것처럼 자연스러운 문서 사용
- AI 도구 사용 흔적을 완전히 제거
- 문서 품질은 AI가 생성했어도 인간이 작성한 것처럼 보이도록 함
- 문서 스타일은 프로젝트 전체와 일관성 있게 유지
- 불필요한 설명이나 과도한 주석 추가 금지
- 개발 과정의 세부사항이나 기술적 세부사항 노출 금지
- 중복 설명이나 반복적인 주석 금지
- 간결하고 목적 중심의 문서 작성