---
description: "CoreSystem ê°œë°œ ê°€ì´ë“œ ë° ê·œì¹™ - Unity 2D ì½”ì–´ ì‹œìŠ¤í…œ í†µí•© ê´€ë¦¬"
globs: ["Assets/Script/CoreSystem/**/*.cs"]
rule_id: core_system_rules
version: 1.2.0
alwaysApply: false
---

# CoreSystem ê°œë°œ ê·œì¹™

## ğŸ“‹ ì‹œìŠ¤í…œ ê°œìš”
CoreSystemì€ ê²Œì„ì˜ í•µì‹¬ ì‹œìŠ¤í…œë“¤ì„ ê´€ë¦¬í•˜ëŠ” ì¤‘ì•™ ì§‘ì¤‘ì‹ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. ëª¨ë“  ì”¬ì—ì„œ ê³µìœ ë˜ëŠ” ì „ì—­ ì‹œìŠ¤í…œë“¤ì„ í†µí•©ì ìœ¼ë¡œ ê´€ë¦¬í•˜ë©°, ê²Œì„ì˜ ê¸°ë³¸ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. Zenject DIì™€ ìë™ ì´ˆê¸°í™” ì‹œìŠ¤í…œì„ í†µí•´ ì•ˆì •ì ì´ê³  í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### ìµœê·¼ ë³€ê²½(ìš”ì•½)
- **AnimationSystem ì˜ì¡´ì„± ì™„ì „ ì œê±°**: ëª¨ë“  AnimationSystem ê´€ë ¨ ì½”ë“œ ì œê±° ì™„ë£Œ
- **ì„ì‹œ ì• ë‹ˆë©”ì´ì…˜ ë¹„í™œì„±í™”**: ì• ë‹ˆë©”ì´ì…˜ í˜¸ì¶œ ë¶€ë¶„ì„ Debug.Logë¡œ ëŒ€ì²´í•˜ì—¬ ê²Œì„ ë¡œì§ ì •ìƒ ë™ì‘
- **Zenject DI í†µí•© ì™„ë£Œ**: ëª¨ë“  CoreSystem ë§¤ë‹ˆì €ê°€ ì˜ì¡´ì„± ì£¼ì…ìœ¼ë¡œ ì „í™˜ ì™„ë£Œ
- **ì‹±ê¸€í†¤ ì œê±° ì™„ë£Œ**: GameStateManager, SceneTransitionManager, AudioManager, SaveManager ë“±ì—ì„œ ì‹±ê¸€í†¤ íŒ¨í„´ ì œê±° ì™„ë£Œ
- **ìë™ ì´ˆê¸°í™” ì‹œìŠ¤í…œ**: ICoreSystemInitializable ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ ìë™ ì´ˆê¸°í™” êµ¬í˜„ ì™„ë£Œ
- **ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ ì„¤ê³„**: ëª¨ë“  ë§¤ë‹ˆì €ê°€ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ì—¬ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„± í™•ë³´ ì™„ë£Œ
- **ì»´íŒŒì¼ ì—ëŸ¬ í•´ê²°**: ëª¨ë“  CoreSystem ê´€ë ¨ ì»´íŒŒì¼ ì—ëŸ¬ í•´ê²° ì™„ë£Œ
- **ì˜¤ë””ì˜¤ í’€ë§ ì‹œìŠ¤í…œ**: AudioPoolManagerë¥¼ í†µí•œ ì„±ëŠ¥ ìµœì í™”
- **ìŠ¬ë ˆì´ ë” ìŠ¤íŒŒì´ì–´ ë°©ì‹ ì €ì¥**: í„´ ê¸°ë°˜ ìë™ ì €ì¥ ì‹œìŠ¤í…œ
- **í•œêµ­ì–´ ë¡œê¹…**: GameLoggerë¥¼ í†µí•œ ì¹´í…Œê³ ë¦¬ë³„ ë¡œê¹…

## ğŸ—ï¸ í´ë” êµ¬ì¡° ê·œì¹™
```
CoreSystem/
â”œâ”€â”€ Manager/          # ì½”ì–´ ë§¤ë‹ˆì € (5ê°œ íŒŒì¼)
â”œâ”€â”€ Audio/           # ì˜¤ë””ì˜¤ ê´€ë¦¬ (3ê°œ íŒŒì¼)
â”œâ”€â”€ Save/            # ì €ì¥ ê´€ë¦¬ (1ê°œ íŒŒì¼)
â”œâ”€â”€ Utility/         # ì½”ì–´ ìœ í‹¸ë¦¬í‹° (3ê°œ íŒŒì¼)
â”œâ”€â”€ UI/              # ì½”ì–´ UI (4ê°œ íŒŒì¼)
â”œâ”€â”€ Interface/       # ì½”ì–´ ì¸í„°í˜ì´ìŠ¤ (6ê°œ íŒŒì¼)
â””â”€â”€ Data/            # ì½”ì–´ ë°ì´í„° (ë¹ˆ í´ë”)
```

## ğŸ“ ì£¼ìš” ì»´í¬ë„ŒíŠ¸ ê·œì¹™

### Manager í´ë” ê·œì¹™ (5ê°œ íŒŒì¼)
- **CoreSystemInitializer.cs**: ëª¨ë“  ì½”ì–´ ì‹œìŠ¤í…œ ì´ˆê¸°í™”
- **GameStateManager.cs**: ê²Œì„ ìƒíƒœ ê´€ë¦¬
- **MainSceneInstaller.cs**: ë©”ì¸ ì”¬ ì„¤ì¹˜ì
- **PlayerCharacterSelectionManager.cs**: í”Œë ˆì´ì–´ ìºë¦­í„° ì„ íƒ ê´€ë¦¬
- **SceneTransitionManager.cs**: ì”¬ ì „í™˜ ê´€ë¦¬

### Audio í´ë” ê·œì¹™ (3ê°œ íŒŒì¼)
- **AudioManager.cs**: ì˜¤ë””ì˜¤ ì‹œìŠ¤í…œ ê´€ë¦¬ (ì‹±ê¸€í†¤)
- **AudioPoolManager.cs**: ì˜¤ë””ì˜¤ í’€ë§ ê´€ë¦¬
- **AudioEventTrigger.cs**: ì˜¤ë””ì˜¤ ì´ë²¤íŠ¸ íŠ¸ë¦¬ê±°

### Save í´ë” ê·œì¹™ (1ê°œ íŒŒì¼)
- **SaveManager.cs**: ì €ì¥ ì‹œìŠ¤í…œ ê´€ë¦¬ (ì‹±ê¸€í†¤)

### Utility í´ë” ê·œì¹™ (3ê°œ íŒŒì¼)
- **CoroutineRunner.cs**: ì½”ë£¨í‹´ ì‹¤í–‰ ê´€ë¦¬
- **GameLogger.cs**: ê²Œì„ ë¡œê¹… ì‹œìŠ¤í…œ (ì‹±ê¸€í†¤)
- **ICoroutineRunner.cs**: ì½”ë£¨í‹´ ëŸ¬ë„ˆ ì¸í„°í˜ì´ìŠ¤

### UI í´ë” ê·œì¹™ (4ê°œ íŒŒì¼)
- **LoadingScreenController.cs**: ë¡œë”© í™”ë©´ ì»¨íŠ¸ë¡¤ëŸ¬
- **SettingsManager.cs**: ì„¤ì • ê´€ë¦¬
- **SettingsPanelController.cs**: ì„¤ì • íŒ¨ë„ ì»¨íŠ¸ë¡¤ëŸ¬
- **TransitionEffectController.cs**: ì „í™˜ íš¨ê³¼ ì»¨íŠ¸ë¡¤ëŸ¬

### Interface í´ë” ê·œì¹™ (6ê°œ íŒŒì¼)
- **IAudioManager.cs**: ì˜¤ë””ì˜¤ ë§¤ë‹ˆì € ì¸í„°í˜ì´ìŠ¤
- **ICoreSystemInitializable.cs**: ì½”ì–´ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì¸í„°í˜ì´ìŠ¤
- **IGameStateManager.cs**: ê²Œì„ ìƒíƒœ ë§¤ë‹ˆì € ì¸í„°í˜ì´ìŠ¤
- **IPlayerCharacterSelectionManager.cs**: í”Œë ˆì´ì–´ ìºë¦­í„° ì„ íƒ ê´€ë¦¬ ì¸í„°í˜ì´ìŠ¤
- **ISaveManager.cs**: ì €ì¥ ë§¤ë‹ˆì € ì¸í„°í˜ì´ìŠ¤
- **ISceneTransitionManager.cs**: ì”¬ ì „í™˜ ë§¤ë‹ˆì € ì¸í„°í˜ì´ìŠ¤

## ğŸ¯ ê°œë°œ ê·œì¹™

### 1. ì‹±ê¸€í†¤ íŒ¨í„´ ê·œì¹™
- **Instance í”„ë¡œí¼í‹°**: ì „ì—­ ì ‘ê·¼ì„ ìœ„í•œ Instance í”„ë¡œí¼í‹°
- **Awake ì´ˆê¸°í™”**: Awakeì—ì„œ ì´ˆê¸°í™” ìˆ˜í–‰
- **DontDestroyOnLoad**: ì”¬ ì „í™˜ ì‹œì—ë„ ìœ ì§€

### 2. ì´ˆê¸°í™” ìˆœì„œ ê·œì¹™
- **GameLogger**: ë¡œê¹… ì‹œìŠ¤í…œ ìµœìš°ì„  ì´ˆê¸°í™”
- **CoroutineRunner**: ì½”ë£¨í‹´ ëŸ¬ë„ˆ ì´ˆê¸°í™”
- **ë§¤ë‹ˆì €ë“¤**: ê°ì¢… ë§¤ë‹ˆì € ì´ˆê¸°í™”
- **UI**: UI ì‹œìŠ¤í…œ ì´ˆê¸°í™”

### 3. ICoreSystemInitializable ì¸í„°í˜ì´ìŠ¤ ê·œì¹™
- **Initialize()**: ì‹œìŠ¤í…œ ì´ˆê¸°í™” (IEnumerator)
- **OnInitializationFailed()**: ì´ˆê¸°í™” ì‹¤íŒ¨ ì‹œ í˜¸ì¶œ
- **IsInitialized**: ì´ˆê¸°í™” ìƒíƒœ (í”„ë¡œí¼í‹°)

### 4. ì˜¤ë””ì˜¤ ì‹œìŠ¤í…œ ê·œì¹™
- **AudioPoolManager**: ì‚¬ìš´ë“œ ì¤‘ë³µ ë°©ì§€
- **ìš°ì„ ìˆœìœ„ ì‹œìŠ¤í…œ**: ì‚¬ìš´ë“œë³„ ìš°ì„ ìˆœìœ„ ì„¤ì •
- **ì¿¨ë‹¤ìš´ ì‹œìŠ¤í…œ**: ë™ì¼ ì‚¬ìš´ë“œ ì¤‘ë³µ ì¬ìƒ ë°©ì§€

### 5. ë¡œê¹… ì‹œìŠ¤í…œ ê·œì¹™
- **GameLogger**: ì¹´í…Œê³ ë¦¬ë³„ ë¡œê¹… (Audio, UI, Combat, Character, SkillCard, Stage, Utility, Error)
- **ë¡œê·¸ ë ˆë²¨**: Info, Warning, Error, Debug
- **í•œêµ­ì–´ ë©”ì‹œì§€**: ëª¨ë“  ë¡œê·¸ ë©”ì‹œì§€ëŠ” í•œêµ­ì–´

### 6. ì”¬ ì „í™˜ ê·œì¹™
- **ë¹„ë™ê¸° ì „í™˜**: async/await íŒ¨í„´ ì‚¬ìš©
- **ë¡œë”© í™”ë©´**: ì „í™˜ ì¤‘ ë¡œë”© í™”ë©´ í‘œì‹œ
- **ì „í™˜ íš¨ê³¼**: í˜ì´ë“œ ì¸/ì•„ì›ƒ íš¨ê³¼

### 7. Zenject DI ê·œì¹™
- **ì˜ì¡´ì„± ì£¼ì…**: Zenjectë¥¼ í†µí•œ ëŠìŠ¨í•œ ê²°í•© êµ¬í˜„
- **ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜**: DI ë°”ì¸ë”©ì€ ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„± í™•ë³´
- **Installer íŒ¨í„´**: ê° ì‹œìŠ¤í…œë³„ Installer í´ë˜ìŠ¤ë¡œ DI ì„¤ì • ì¤‘ì•™í™”
- **ìƒëª…ì£¼ê¸° ê´€ë¦¬**: Zenjectì˜ `AsSingle()`, `NonLazy()` ë“± ì ì ˆí•œ ìŠ¤ì½”í”„ ì„¤ì •

## ğŸ”§ ì‚¬ìš© ë°©ë²•

### ê¸°ë³¸ ì‚¬ìš©ë²•
```csharp
// ì”¬ ì „í™˜
SceneTransitionManager.Instance.TransitionToMainScene();
SceneTransitionManager.Instance.TransitionToBattleScene();
SceneTransitionManager.Instance.TransitionToCoreScene();

// ì˜¤ë””ì˜¤ ì‹œìŠ¤í…œ
AudioClip bgmClip = Resources.Load<AudioClip>("Sounds/BGM/MainTheme");
AudioManager.Instance.PlayBGM(bgmClip, true); // í˜ì´ë“œ ì¸ ì˜µì…˜

AudioClip sfxClip = Resources.Load<AudioClip>("Sounds/SFX/ButtonClick");
AudioManager.Instance.PlaySFX(sfxClip); // ê¸°ë³¸ ë°©ì‹
AudioManager.Instance.PlaySFXWithPool(sfxClip, 1.0f, 5); // í’€ë§ ì‚¬ìš©

// ë¡œê¹…
GameLogger.LogInfo("ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì™„ë£Œ", GameLogger.LogCategory.UI);
GameLogger.LogWarning("ê²½ê³  ë©”ì‹œì§€", GameLogger.LogCategory.Combat);
GameLogger.LogError("ì—ëŸ¬ ë°œìƒ", GameLogger.LogCategory.Error);

// ì €ì¥ ì‹œìŠ¤í…œ
SaveManager.Instance.SaveAudioSettings(0.6f, 1.0f);
var (bgm, sfx) = SaveManager.Instance.LoadAudioSettings(0.7f, 1.0f);
await SaveManager.Instance.SaveCurrentScene();
```

### ì‹œìŠ¤í…œ ì´ˆê¸°í™” êµ¬í˜„
```csharp
// ICoreSystemInitializable êµ¬í˜„
public class MySystem : MonoBehaviour, ICoreSystemInitializable
{
    public bool IsInitialized { get; private set; } = false;
    
    public IEnumerator Initialize()
    {
        GameLogger.LogInfo("MySystem ì´ˆê¸°í™” ì‹œì‘", GameLogger.LogCategory.UI);
        
        // ì´ˆê¸°í™” ë¡œì§
        yield return null;
        
        IsInitialized = true;
        GameLogger.LogInfo("MySystem ì´ˆê¸°í™” ì™„ë£Œ", GameLogger.LogCategory.UI);
    }
    
    public void OnInitializationFailed()
    {
        GameLogger.LogError("MySystem ì´ˆê¸°í™” ì‹¤íŒ¨", GameLogger.LogCategory.Error);
        IsInitialized = false;
    }
}
```

### Zenject DI ì‚¬ìš©ë²•
```csharp
// Installer í´ë˜ìŠ¤ êµ¬í˜„
public class MySystemInstaller : MonoInstaller<MySystemInstaller>
{
    public override void InstallBindings()
    {
        // ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ ë°”ì¸ë”©
        Container.Bind<IMyService>().To<MyService>().AsSingle();
        
        // ì‹±ê¸€í†¤ ë§¤ë‹ˆì € ë°”ì¸ë”©
        Container.Bind<MyManager>().AsSingle().NonLazy();
        
        // íŒ©í† ë¦¬ íŒ¨í„´ ë°”ì¸ë”©
        Container.BindFactory<MyObject, MyObject.Factory>();
    }
}

// ì˜ì¡´ì„± ì£¼ì… ì‚¬ìš©
public class MyController : MonoBehaviour
{
    [Inject] private IMyService myService;
    [Inject] private MyManager myManager;
    
    private void Start()
    {
        // ì£¼ì…ëœ ì„œë¹„ìŠ¤ ì‚¬ìš©
        myService.DoSomething();
        myManager.Initialize();
    }
}
```

### ì˜¤ë””ì˜¤ í’€ë§ ê³ ê¸‰ ì‚¬ìš©ë²•
```csharp
// AudioPoolManager ì§ì ‘ ì‚¬ìš©
AudioPoolManager poolManager = AudioManager.Instance.GetComponent<AudioPoolManager>();

// ìš°ì„ ìˆœìœ„ ì§€ì • ì‚¬ìš´ë“œ ì¬ìƒ
AudioClip enemyDefeat = Resources.Load<AudioClip>("Sounds/SFX/EnemyDefeat");
poolManager.PlaySound(enemyDefeat, 1.0f, 10); // ë†’ì€ ìš°ì„ ìˆœìœ„

// ìë™ ìš°ì„ ìˆœìœ„ ì‚¬ìš´ë“œ ì¬ìƒ
AudioClip skillActivation = Resources.Load<AudioClip>("Sounds/SFX/SkillActivation");
poolManager.PlaySound(skillActivation, 0.8f); // ìš°ì„ ìˆœìœ„ ìë™ ì„¤ì •

// ì¿¨ë‹¤ìš´ ìƒíƒœ í™•ì¸
if (!poolManager.IsInCooldown("ButtonClick"))
{
    poolManager.PlaySound(buttonClickClip, 0.7f);
}
```

## ğŸ—ï¸ ì•„í‚¤í…ì²˜ íŒ¨í„´

### 1. ì‹±ê¸€í†¤ íŒ¨í„´
- **CoreSystemInitializer**: ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì‹±ê¸€í†¤
- **SceneTransitionManager**: ì”¬ ì „í™˜ ê´€ë¦¬ ì‹±ê¸€í†¤
- **AudioManager**: ì˜¤ë””ì˜¤ ì‹œìŠ¤í…œ ì‹±ê¸€í†¤
- **SaveManager**: ì €ì¥ ì‹œìŠ¤í…œ ì‹±ê¸€í†¤
- **GameLogger**: ë¡œê¹… ì‹œìŠ¤í…œ ì‹±ê¸€í†¤

### 2. íŒ©í† ë¦¬ íŒ¨í„´
- **ì‹œìŠ¤í…œ ìƒì„±**: ê° ì‹œìŠ¤í…œì˜ ìƒì„± ë° ì´ˆê¸°í™”
- **ì”¬ ìƒì„±**: ì”¬ ê°ì²´ ìƒì„± ë° ê´€ë¦¬

### 3. ì˜µì €ë²„ íŒ¨í„´
- **ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ**: ì‹œìŠ¤í…œ ê°„ ì´ë²¤íŠ¸ í†µì‹ 
- **ìƒíƒœ ë³€ê²½**: ê²Œì„ ìƒíƒœ ë³€ê²½ ì•Œë¦¼
- **ì´ˆê¸°í™” ì™„ë£Œ**: ì´ˆê¸°í™” ì™„ë£Œ ì•Œë¦¼

### 4. íŒŒì‚¬ë“œ íŒ¨í„´
- **CoreSystemInitializer**: ë³µì¡í•œ ì´ˆê¸°í™” ê³¼ì •ì„ ë‹¨ìˆœí™”
- **SceneTransitionManager**: ì”¬ ì „í™˜ ê³¼ì •ì„ ë‹¨ìˆœí™”

## ğŸ”§ ê¸°ìˆ ì  êµ¬í˜„ ì„¸ë¶€ì‚¬í•­

### ì„±ëŠ¥ ìµœì í™”
- **ë©”ëª¨ë¦¬ ê´€ë¦¬**: ì‹±ê¸€í†¤ íŒ¨í„´ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ ì¤‘ë³µ ìƒì„± ë°©ì§€
- **í”„ë ˆì„ ìµœì í™”**: Update() ë©”ì„œë“œ ìµœì†Œí™”, ì´ë²¤íŠ¸ ê¸°ë°˜ ì²˜ë¦¬
- **ë¡œë”© ìµœì í™”**: ë¹„ë™ê¸° ì”¬ ë¡œë”©, ë¦¬ì†ŒìŠ¤ ìºì‹± ì „ëµ
- **GC ì••ë°• ìµœì†Œí™”**: ê°ì²´ í’€ë§ì„ í†µí•œ ë©”ëª¨ë¦¬ í• ë‹¹ ìµœì†Œí™”

### ìŠ¤ë ˆë“œ ì•ˆì „ì„±
- **ë™ì‹œì„± ì œì–´**: ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì‹œ ë½ ì‚¬ìš©
- **ë¹„ë™ê¸° ì²˜ë¦¬**: async/await íŒ¨í„´ì„ í†µí•œ ë¹„ë™ê¸° ì”¬ ë¡œë”©
- **ì´ë²¤íŠ¸ ì²˜ë¦¬**: ìŠ¤ë ˆë“œ ì•ˆì „í•œ ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ êµ¬í˜„
- **ë°ì´í„° ë™ê¸°í™”**: ê³µìœ  ë°ì´í„° ì ‘ê·¼ ì‹œ ë™ê¸°í™” ë©”ì»¤ë‹ˆì¦˜

### ë©”ëª¨ë¦¬ ê´€ë¦¬
- **ìƒëª…ì£¼ê¸° ê´€ë¦¬**: DontDestroyOnLoadë¥¼ í†µí•œ ì „ì—­ ê°ì²´ ê´€ë¦¬
- **ë¦¬ì†ŒìŠ¤ í•´ì œ**: IDisposable íŒ¨í„´ì„ í†µí•œ ë¦¬ì†ŒìŠ¤ ì •ë¦¬
- **ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€**: ì´ë²¤íŠ¸ êµ¬ë… í•´ì œ, ìˆœí™˜ ì°¸ì¡° ë°©ì§€
- **í”„ë¡œíŒŒì¼ë§**: Unity Profilerë¥¼ í†µí•œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§
